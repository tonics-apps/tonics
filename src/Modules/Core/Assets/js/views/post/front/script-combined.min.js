var H=Object.defineProperty;var l=(e,t)=>H(e,"name",{value:t,configurable:!0});var f=Object.defineProperty,u=l((e,t)=>f(e,"name",{value:t,configurable:!0}),"__name"),p=l(class{constructor(){this.$eventHandlers=new Map}attachHandlerToEvent(e,t){var n;return this.getHandlers().has(e)?((n=this.getHandlers().get(e))==null||n.push(t),this):(this.getHandlers().set(e,[t]),this)}getHandlers(){return this.$eventHandlers}detachHandlerFromEvent(e){if(this.getHandlers().has(e))return this.getHandlers().delete(e),this}getEventHandlers(e){var t;return this.getHandlers().has(e)?(t=this.getHandlers().get(e))!=null?t:[]:[]}},"EventQueue");u(p,"EventQueue");window.hasOwnProperty("TonicsEvent")||(window.TonicsEvent={});window.TonicsEvent.EventQueue=()=>new p;function b(e,t){let n=new p,r=t.name;if(e.hasOwnProperty(r)){let i=e[r];return i.length>0&&(i==null||i.forEach((s,c)=>{n.attachHandlerToEvent(t,s)})),n}throw new DOMException(`Can't attach ${t} to listeners because it doesn't exist`)}l(b,"attachEventAndHandlersToHandlerProvider");u(b,"attachEventAndHandlersToHandlerProvider");window.hasOwnProperty("TonicsEvent")||(window.TonicsEvent={});window.TonicsEvent.attachEventAndHandlersToHandlerProvider=(e,t)=>b(e,t);var y=l(class{constructor(e){if(e)return this.$handleProvider=e,this}dispatch(e){let t=e.constructor,n=this.getHandler().getEventHandlers(t);for(let r=0;r<n.length;r++)Object.getOwnPropertyNames(n[r]).includes("arguments")?n[r](e):new n[r](e);return e}setHandler(e){return this.$handleProvider=e,this}getHandler(){return this.$handleProvider}dispatchEventToHandlers(e,t,n){let r=b(e,n);this.setHandler(r).dispatch(t)}},"EventDispatcher");u(y,"EventDispatcher");window.hasOwnProperty("TonicsEvent")||(window.TonicsEvent={});window.TonicsEvent.EventDispatcher=new y;var f=Object.defineProperty,u=l((e,t)=>f(e,"name",{value:t,configurable:!0}),"__name"),p=l(class{constructor(){this.$eventHandlers=new Map}attachHandlerToEvent(e,t){var n;return this.getHandlers().has(e)?((n=this.getHandlers().get(e))==null||n.push(t),this):(this.getHandlers().set(e,[t]),this)}getHandlers(){return this.$eventHandlers}detachHandlerFromEvent(e){if(this.getHandlers().has(e))return this.getHandlers().delete(e),this}getEventHandlers(e){var t;return this.getHandlers().has(e)?(t=this.getHandlers().get(e))!=null?t:[]:[]}},"EventQueue");u(p,"EventQueue");window.hasOwnProperty("TonicsEvent")||(window.TonicsEvent={});window.TonicsEvent.EventQueue=()=>new p;var S={OnBeforeTonicsFieldPreviewEvent:[],OnBeforeTonicsFieldSubmitEvent:[],OnBeforeScrollBottomEvent:[],OnScrollBottomEvent:[],OnDoubleClickEvent:[],OnClickEvent:[],OnShiftClickEvent:[],OnRowMarkForDeletionEvent:[],OnSubmitFieldEditorsFormEvent:[],OnAudioPlayerPlayEvent:[],OnAudioPlayerPauseEvent:[],OnAudioPlayerPreviousEvent:[],OnAudioPlayerNextEvent:[],OnAudioPlayerClickEvent:[]};window.TonicsEvent.EventConfig=S;var f=Object.defineProperty,u=l((e,t)=>f(e,"name",{value:t,configurable:!0}),"__name"),v=l(class{constructor(e){return e?this.query(e):this}query(e){let t=document.querySelector(`${e}`);if(t)return this.setQueryResult(t),this;console.log(`Invalid class or id name - ${e}`)}setQueryResult(e){return this.$queryResult=e,this}getQueryResult(){return this.$queryResult}},"ElementAbstract");u(v,"ElementAbstract");var E=l(class extends v{constructor(e,t){super(e),this.$menuDetails={},this.queryAdapter=t}getQueryAdapter(){return this.queryAdapter}settings(e,t,n){return this.getMenuDetails().menu={parent:{element:this.getQueryResult(),event:""},propagate:!0,propagateElements:[],menuClass:e,buttonClass:t,subMenuClass:n,on:{button:{icon:{add:"",remove:""}},subMenu:{class:{add:"",remove:"",animation:{start:"",end:""}}}},off:{button:{icon:{add:"",remove:""}},subMenu:{class:{add:"",remove:"",animation:{start:"",end:""}}}}},this}stopPropagation(e=!0){return this.getMenuDetails().hasOwnProperty("menu")&&(this.getMenuDetails().menu.propagate=e),this}propagateElements(e=[]){return this.getMenuDetails().hasOwnProperty("menu")&&(this.getMenuDetails().menu.propagateElements=e),this}buttonIcon(e,t){if(this.getMenuDetails().hasOwnProperty("menu"))return this.getMenuDetails().menu.on.button.icon.add=e,this.getMenuDetails().menu.off.button.icon.add=t,this;throw new DOMException("No Menu Element Added")}menuIsOn(e,t){if(this.getMenuDetails().hasOwnProperty("menu"))return this.getMenuDetails().menu.on.subMenu.class.add=e,this.getMenuDetails().menu.on.subMenu.class.remove=t,this;throw new DOMException("No Menu Element Added")}menuIsOff(e,t){if(this.getMenuDetails().hasOwnProperty("menu"))return this.getMenuDetails().menu.off.subMenu.class.add=e,this.getMenuDetails().menu.off.subMenu.class.remove=t,this;throw new DOMException("No Menu Element Added")}run(){let e=this.getMenuDetails().menu.parent.element;e&&e.addEventListener("click",t=>{var n,r;let i=t.target;if(this.getMenuDetails().menu.propagate){let s=!1;this.getMenuDetails().menu.propagateElements.forEach(c=>{i.closest(c)&&(s=!0)}),s||t.stopPropagation()}if(i.closest(this.getMenuDetails().menu.buttonClass)){t.preventDefault();let s=i.closest(this.getMenuDetails().menu.buttonClass);if(s.classList.toggle("toggle-on"),s.ariaLabel="Expand child menu",s.ariaExpanded="false",s.classList.contains("toggle-on")){if(s.closest("[data-menu-depth]")){let d=s.closest("[data-menu-depth]"),o=document.querySelectorAll(`[data-menu-depth="${d.dataset.menuDepth}"]`);o.length>0&&o.forEach(m=>{let h=m.querySelector(this.getMenuDetails().menu.buttonClass);h!==s&&h&&h.classList.contains("toggle-on")&&h.click()})}s.ariaLabel="Collapse child menu",s.ariaExpanded="true"}let c=s.closest(this.getMenuDetails().menu.menuClass),a=(r=(n=this.getQueryAdapter().addNodeElement(c).in())==null?void 0:n.forward(this.getMenuDetails().menu.subMenuClass))==null?void 0:r.getQueryResult();if(a||(a=this.getQueryAdapter().addNodeElement(c).queryChildren(this.getMenuDetails().menu.subMenuClass).getQueryResult()),a.classList.contains(this.getMenuDetails().menu.on.subMenu.class.add[0]))if(this.hasAnimation(a)){let d=this.getMenuDetails().menu.off.subMenu.class.remove.find(g=>g.includes("flex")||g.includes("display-block")),o=this.getMenuDetails().menu.off.subMenu.class.remove.filter(g=>g!==d),m=this.getMenuDetails().menu.off.subMenu.class.add.find(g=>g.includes("none")),h=this.getMenuDetails().menu.off.subMenu.class.add.filter(g=>g!==m);a.classList.remove(o),a.classList.add(h),a.addEventListener("animationend",()=>{a.classList.remove(d),a.classList.add(m)},{once:!0})}else a.classList.remove(...this.getMenuDetails().menu.off.subMenu.class.remove),a.classList.add(...this.getMenuDetails().menu.off.subMenu.class.add);else a.classList.add(...this.getMenuDetails().menu.on.subMenu.class.add),a.classList.remove(...this.getMenuDetails().menu.on.subMenu.class.remove);if(this.getMenuDetails().menu.off.button.icon.add){let d=s.querySelector(".svgUse");if(d)d.getAttribute("xlink:href")===this.getMenuDetails().menu.off.button.icon.add?this.getQueryAdapter().addNodeElement(d).setSVGUseAttribute(this.getMenuDetails().menu.on.button.icon.add):this.getQueryAdapter().addNodeElement(d).setSVGUseAttribute(this.getMenuDetails().menu.off.button.icon.add);else throw new DOMException("Add class `svgUse` to svg use element")}}})}getMenuDetails(){return this.$menuDetails}closeMenuToggle(e=null){let t=this;e===null&&(e=document),e.querySelectorAll(t.getMenuDetails().menu.buttonClass).forEach(n=>{n.classList.contains("toggle-on")&&n.dataset.hasOwnProperty("menutoggle_click_outside")&&n.dataset.menutoggle_click_outside==="true"&&n.click()})}closeOnClickOutSide(e){e&&this.getMenuDetails().menu.parent.element.querySelectorAll(this.getMenuDetails().menu.buttonClass).forEach(r=>{r.setAttribute("data-menutoggle_click_outside","true")});let t=this;return document.addEventListener("click",function(n){t.closeMenuToggle()}),document.addEventListener("keyup",function(n){n.key==="Escape"&&t.closeMenuToggle()}),this}hasAnimation(e){let t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0}},"MenuToggle");u(E,"MenuToggle");window.hasOwnProperty("TonicsScript")||(window.TonicsScript={});window.TonicsScript.MenuToggle=(e,t)=>new E(e,t);var f=Object.defineProperty,u=l((e,t)=>f(e,"name",{value:t,configurable:!0}),"__name"),v=l(class{constructor(e){return e?this.query(e):this}query(e){let t=document.querySelector(`${e}`);if(t)return this.setQueryResult(t),this;console.log(`Invalid class or id name - ${e}`)}setQueryResult(e){return this.$queryResult=e,this}getQueryResult(){return this.$queryResult}},"ElementAbstract");u(v,"ElementAbstract");var T=l(class extends v{addNodeElement(e){return this.setQueryResult(e),this}forward(e){let t=this.getQueryResult().nextElementSibling;for(;t;){if(t.matches(e))return this.setQueryResult(t),this;t=t.nextElementSibling}return null}backward(e){let t=this.getQueryResult().previousElementSibling;for(;t;){if(t.matches(e))return this.setQueryResult(t),this;t=t.previousElementSibling}return null}in(){let e=this.getQueryResult().firstElementChild;return e?(this.setQueryResult(e),this):null}out(){let e=this.getQueryResult().parentElement;return e?(this.setQueryResult(e),this):null}queryChildren(e,t=!0){let n=this.getQueryResult().querySelector(e);return n?t?(this.setQueryResult(n),this):n:null}setSVGUseAttribute(e){let t=this.getQueryResult();if(t.tagName=="use")t.removeAttribute("xlink:href"),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);else throw new DOMException("Not a valid svg use element")}},"Query");u(T,"Query");window.hasOwnProperty("TonicsScript")||(window.TonicsScript={});window.TonicsScript.Query=()=>new T;var f=Object.defineProperty,u=l((e,t)=>f(e,"name",{value:t,configurable:!0}),"__name");function O(e,t,n){let r,i=[],s={};for(r=0;r<e.length;r++)i.push(e[r].replace(/([-[\]{}()*+?.\\^$|#,])/g,"\\$1")),s[e[r]]=t[r];return i=i.join("|"),n=n.replace(new RegExp(i,"g"),function(c){return s[c]}),n}l(O,"str_replace");u(O,"str_replace");function C(e,t="-"){return e=e.trim(),e=O(["&","@","%","$","*","<",">","+","!"],[" and"," at"," percentage"," dollar"," asterisk "," less than"," greater than"," plus","exclamation"],e),e.toLocaleString().toLowerCase().normalize("NFD").replace(/[^\S]+/g,t)}l(C,"slug");u(C,"slug");function _(e){return document.createElement(e).toString()!=="[object HTMLUnknownElement]"}l(_,"isValidTagName");u(_,"isValidTagName");var D=l(class{constructor(e=""){this._$tableOfContentDetails={},this._tocTree=[],this._breakLoopBackward=!1,this._tocResult="",this._$tableOfContentDetails={tocContainer:e,noOfHeadersFound:0,tocDepth:4,tocNoHeadingToTrigger:2,tocLabel:"Table Of Content",tocLabelTag:"h2",tocClass:"tonics-toc"}}get breakLoopBackward(){return this._breakLoopBackward}set breakLoopBackward(e){this._breakLoopBackward=e}get tocResult(){return this._tocResult}set tocResult(e){this._tocResult=e}get tocTree(){return this._tocTree}set tocTree(e){this._tocTree=e}get $tableOfContentDetails(){return this._$tableOfContentDetails}set $tableOfContentDetails(e){this._$tableOfContentDetails=e}settings(){this._$tableOfContentDetails={tocDepth:4,tocNoHeadingToTrigger:2,tocLabel:"Table Of Content",tocLabelTag:"h2",tocClass:".tonics-toc"}}tocContainer(e){return this._$tableOfContentDetails.tocContainer=e,this}tocDepth(e){return this._$tableOfContentDetails.tocDepth=e,this}tocNoHeadingToTrigger(e){return this._$tableOfContentDetails.tocNoHeadingToTrigger=e,this}tocLabel(e){return this._$tableOfContentDetails.tocLabel=e,this}tocLabelTag(e){return this._$tableOfContentDetails.tocLabelTag=e,this}tocClass(e){return this._$tableOfContentDetails.tocClass=e,this}run(){let e=this._$tableOfContentDetails;if(document.querySelector(e.tocContainer)){let t="h1, h2, h3, h4";if(e.tocDepth<=6){t="";for(let i=1;i<=e.tocDepth;i++)i===e.tocDepth?t+=`h${i}`:t+=`h${i}, `}let n=document.querySelector(e.tocContainer).querySelectorAll(t);if(n.length<e.tocNoHeadingToTrigger)return;if(!_(e.tocLabelTag))throw new DOMException(e.tocLabelTag+" is not a valid tagName ");if(n.length>0){e.noOfHeadersFound=n.length;let i=0,s=0,c="<ul>",a={},d=[];n.forEach((o,m)=>{if(o.textContent.length>0){let h=C(o.textContent),g=o.textContent;if(o.hasAttribute("id")?o.id.trim()===""&&(o.id=h):o.id=h,i=parseInt(o.tagName[1]),a={level:i,headerID:h,headerText:g},a.data=`<li data-heading_level="${i}"><a href="#${h}"><span class="toctext">${g}</span></a>`,this.tocTree.length===0)this.pushToTree(a);else{if(this.tocTree[s].level===i&&(this.tocTree[s].data+="</li>"+a.data),i>this.tocTree[s].level&&(this.tocTree[s].data+="<ul>",this.pushToTree(a),s=this.tocTree.length-1,d.push(a)),i<this.tocTree[s].level){let M=0;for(let w of this.loopTreeBackward(d))w.level>i&&(w.data+="</li>",d.pop(),M++),w.level===i&&(this.breakLoopBackward=!0);a.data="</ul></li>".repeat(M)+a.data,this.pushToTree(a),s=this.tocTree.length-1}m===n.length-1&&(this.tocTree[s].data+="</li>")}}}),this.tocTree.forEach(o=>{c+=o.data}),c+="</ul>",c=`<div class="${e.tocClass}"> <${e.tocLabelTag}> ${e.tocLabel} </${e.tocLabelTag}> ${c} </div>`,this._tocResult=c}}}pushToTree(e){e.index=this.tocTree.length,this.tocTree.push(e)}*loopTreeBackward(e=null){e===null&&(e=this.tocTree);for(let t=e.length-1;t>=0&&!this.breakLoopBackward;t--)yield e[t];this.breakLoopBackward=!1}},"TableOfContent");u(D,"TableOfContent");window.hasOwnProperty("TonicsScript")||(window.TonicsScript={});window.TonicsScript.TableOfContent=e=>new D(e);var P=new D(".entry-content");P.tocDepth(6).run();try{new E(".site-nav",new T).settings(".menu-block",".dropdown-toggle",".child-menu").buttonIcon("#tonics-arrow-up","#tonics-arrow-down").menuIsOff(["swing-out-top-fwd","d:none"],["swing-in-top-fwd","d:flex"]).menuIsOn(["swing-in-top-fwd","d:flex"],["swing-out-top-fwd","d:none"]).closeOnClickOutSide(!0).run()}catch(e){console.error("An Error Occur Setting MenuToggle: Site-Nav")}export{y as EventDispatcher,p as EventQueue,E as MenuToggle,T as Query,D as TableOfContent};
