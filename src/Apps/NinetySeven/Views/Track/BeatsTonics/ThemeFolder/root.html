[[inherit("Modules::Core/Views/Templates/theme", "Apps::NinetySeven/Views/Block/base")]]
[[import("Modules::Core/Views/Blocks/AudioPlayer")]]

[[hook_into('before_footer')
    <section class="audio-player position:sticky bottom:0 left:0 z-index:audio-sticky-footer d:none">
    <div data-audioplayer_groupid="GLOBAL_GROUP" class="audio-player-global-container bg:pure-black d:flex flex-d:column flex-gap:small position:relative">
        <div class="audio-player-queue color:black bg:white-one border-width:default border:black d:none flex-gap flex-d:column height:600px width:320px bg:pure-white color:black padding:default position:absolute right:0 bottom:80px overflow:auto">
            <div class="more-audio-player-control cursor:pointer">

                <button type="button" title="Repeat" class="border:none act-like-button bg:transparent cursor:pointer icon:audio color:black" data-audioplayer_repeat="false">

                    <svg class="repeat-on icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-repeat-on"></use>
                    </svg>
                    <svg class="repeat-off icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-repeat-off"></use>
                    </svg>

                </button>

                <button type="button" title="Shuffle" class="border:none act-like-button bg:transparent cursor:pointer icon:audio color:black" data-audioplayer_shuffle="false">
                    <svg class="shuffle-on icon:audio tonics-widget cursor:pointer pointer-events:none act-like-button">
                        <use class="svgUse" xlink:href="#tonics-shuffle-on"></use>
                    </svg>
                    <svg class="shuffle-off icon:audio tonics-widget cursor:pointer pointer-events:none act-like-button">
                        <use class="svgUse" xlink:href="#tonics-shuffle-off"></use>
                    </svg>

                </button>
            </div>
            <ol class="audio-player-queue-list d:flex flex-d:column flex-gap:small">
            </ol>
        </div>
        <div class="time-progress">
            <div class="progress-container">
                <input type="range" step="1" value="0" class="song-slider" min="0" max="100">

                [[- For Marker -]]
            </div>
        </div>
        <div class="others-audio-player-info d:flex flex-d:row align-items:center padding:0-1rwm">
            <div id="meta-container" class="beatplayer-item flex:one">
                <div class="padding:0-1rwm">
                    <img src="/logo/o-ola-micky-logo.svg" data-audioplayer_globalart="" class="main-album-art width:100px" alt="">
                </div>
                <div data-audioplayer_globaltitle="" class="color:white width:200px text:no-wrap text-overflow:ellipsis"></div>
            </div>
            <div class="cursor:pointer d:flex flex:one">
                <button type="button" title="Previous" class="border:none act-like-button bg:transparent cursor:pointer icon:audio color:white" data-audioplayer_prev="true">

                    <svg class="icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-step-backward"></use>
                    </svg>

                </button>

                <button type="button" title="Play" class="border:none act-like-button bg:transparent cursor:pointer global-play icon:audio-x-2 color:white" data-audioplayer_play="false">
                    <svg class="audio-play icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-audio-play"></use>
                    </svg>
                    <svg class="audio-pause icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-audio-pause"></use>
                    </svg>
                </button>

                <button type="button" title="Next" class="border:none act-like-button bg:transparent cursor:pointer icon:audio color:white" data-audioplayer_next="true">
                    <svg class="icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-step-forward"></use>
                    </svg>
                </button>
            </div>
            <div class="volume-slider-and-more d:flex align-items:center">
                <button type="button" title="Queue" class="border:none act-like-button bg:transparent cursor:pointer dropdown-toggle color:white" aria-expanded="false" aria-label="Expand child menu">
                    <svg class="icon:audio tonics-widget cursor:pointer act-like-button">
                        <use class="svgUse" xlink:href="#tonics-arrow-up"></use>
                    </svg>
                </button>
                <label for="volume-slider" class="screen-reader-text"> Volume </label>
                <input id="volume-slider" title="Volume" type="range" class="volume-slider" min="0" max="1" step="0.1">
            </div>
        </div>
    </div>
</section>
    [[_use("script:track::theme_folder")]]
]]

[[hook_into('in_main')
<style>

    .tonics-files-container {
        display: grid;
        gap: 1em;
        grid-template-columns: repeat(auto-fill, minmax(min(100%,300px),1fr));
        width: 100%;
    }

    main#main {
        background: #000;
        background: linear-gradient(to bottom, black, rgb(31, 34, 34));
    }

    .remove-button-styles {
        display: flex;
        flex-direction: column;
        align-items: center;
        background: transparent;
        border: none;
    }

    .tonics-fm-link {
        text-decoration: none;
        -webkit-transition: -webkit-box-shadow .15s ease,-webkit-transform .15s ease;
        transition: -webkit-box-shadow .15s ease,-webkit-transform .15s ease;
        -o-transition: box-shadow .15s ease,transform .15s ease;
        transition: box-shadow .15s ease,transform .15s ease;
        transition: box-shadow .15s ease,transform .15s ease,-webkit-box-shadow .15s ease,-webkit-transform .15s ease;
        will-change: box-shadow,transform;
    }

    .tonics-fm-link:active {
        box-shadow: inset -4px 2px 5px #9e9e9e2b;
        -webkit-transform: translateY(2px);
        -ms-transform: translateY(2px);
        transform: translateY(2px);
    }

    .tonics-file {
        border-right: 1px solid #a19c9c2e;
        border-bottom: 1px solid #a19c9c2e;
    }

    svg.tonics-folder {
        transform: scale(.8);
        fill: #ffffff;
    }

    .tonics-cart-icon {
        -webkit-transform: scale(0.84);
        transform: scale(0.84);
    }

    .tonics-individual-art-image {
        background-color: black;
        -webkit-box-shadow: 0 8px 24px rgb(0 0 0 / 50%);
        box-shadow: 2px 2px 16px rgb(173 165 187 / 46%);
        padding-bottom: 2%;
        position: relative;
        width: 200px;
    }
</style>
    <section class="main-tonics-folder-container owl padding:default">
    [[add_hook('tonics_folder_search')]]
    [[add_hook('tonics_folder_main')]]
</section>
]]

[[b('tonics_folder_search')
<div class="search-admin width:100% margin-top:0">
    <form class="dataTable-Form form-and-filter width:100% d:flex flex-d:column align-items:center flex-gap:small" method="GET">
        <div class="width:100% d:flex flex-wrap:wrap justify-content:center flex-gap:small form-search">
            <input type="search" value="[[v('URL.PARAMS.query')]]"  class="filter-search-admin border-none border:white border-radius:40px" name="query"
                   aria-label="Search and Hit Enter" placeholder="Search &amp; Hit Enter">
            <button type="button" class="filter-button-toggle d:flex align-items:center bg:transparent border:none color:white border-width:default border:white padding:default cursor:pointer button:box-shadow-variant-3" aria-label="Expand child menu" aria-expanded="false">
                <svg class="icon:admin tonics-filter"><use xlink:href="#tonics-filter"></use></svg>
                Filter Options
            </button>
        </div>
        <div class="overflow:auto width:80% filter-container border-width:default border:white color:black padding:small flex-d:column flex-wrap:wrap flex-gap d:none">
            <div class="form-group d:flex color:white flex-gap align-items:flex-end flex-wrap:wrap">
                [[- For Track Artists -]]
                [[_v('Data.ThemeFolder_FilterOption_TrackArtists')]]

                [[- For Track Keys -]]
                [[_v('Data.ThemeFolder_FilterOption_TrackKey')]]
            </div>

            <div class="child-menu width:100% flex-gap flex-d:row d:flex">
                [[if("v[Data.ThemeFolder_FilterOption_TrackBPM] !== block[empty]")
                <div class="menu-box-checkbox-items color:white max-height:300px overflow:auto">Choose BPM (All By Default)
                    [[_v('Data.ThemeFolder_FilterOption_TrackBPM')]]
                </div>
                ]]

                [[if("v[Data.ThemeFolder_FilterOption_TrackGenres] !== block[empty]")
                <div class="menu-box-checkbox-items color:white max-height:300px overflow:auto">Choose Genres (All By Default)
                    [[_v('Data.ThemeFolder_FilterOption_TrackGenres')]]
                </div>
                ]]
            </div>

            <div class="bg:pure-black color:white border-width:default border:white padding:small d:flex flex-gap:small align-items:center" style="width: clamp(25%, (800px - 100vw) * 1000, 100%);">
                <span class="menu-arranger-text-head">More Options</span>
                <button type="button" class="dropdown-toggle more-filter-button-toggle bg:transparent border:none cursor:pointer" aria-expanded="false" aria-label="Expand child menu">
                    <svg class="icon:admin tonics-arrow-down color:white">
                        <use class="svgUse" xlink:href="#tonics-arrow-down"></use>
                    </svg>
                </button>
            </div>

            <div class="overflow:auto width:80% more-filter-container border-width:default border:white color:black padding:small flex-d:column flex-wrap:wrap flex-gap d:none">
                <div class="child-menu width:100% flex-gap flex-wrap:wrap flex-d:row d:flex">
                    [[each("_moreFilterType in Data.ThemeFolder_FilterOption_More")
                    [[if("v[_moreFilterType.frag] !== block[empty]")
                    <div class="menu-box-checkbox-items color:white max-height:300px overflow:auto"> [[_v('_moreFilterType.label')]]
                        [[_v('_moreFilterType.frag')]]
                    </div>
                    ]]
                    ]]
                </div>
            </div>

            <button style="width: clamp(25%, (800px - 100vw) * 1000, 100%);" class="text-align:center bg:pure-white border:none color:black border-width:default border:blue padding:default cursor:pointer button:box-shadow-variant-2">
                Filter
            </button>
        </div>
    </form>
</div>
]]

[[b('tonics_folder_main')
<div class="d:flex flex-wrap:wrap justify-content:center tonics-folder-main">
    <ul class="tonics-files-container list:style:none">
        [[each("_themeFolderData in Data.ThemeFolder.data")
        [[if("v[_themeFolderData.is_track] == e[0]")
        <li class="d:flex flex-d:column text-align:center tonics-file padding:small">
            <a href="[[v('_themeFolderData._link')]]" data-url_page="[[v('_themeFolderData._link')]]" data-slug_id="[[v('_themeFolderData.slug_id')]]"
               data-tonics_navigate data-is_track="0" class="tonics-fm-link color:white remove-button-styles">
                <svg class="tonics-folder"> <use xlink:href="#tonics-folder"></use></svg>
                <div class="tonics-file-filename">
                    [[v('_themeFolderData._name')]] ([[v('_themeFolderData.num_tracks')]])
                </div>
                <span style="top: 42%;" class="svg-per-file-loading color:white bg:pure-white d:none"></span>
            </a>
        </li>
        ]]
        [[if("v[_themeFolderData.is_track] == e[1]")
        <li class="d:flex flex-d:column text-align:center tonics-file padding:small">
            <a class="tonics-fm-link color:white remove-button-styles" href="[[v('_themeFolderData._link')]]"
               data-tonics_navigate data-slug_id="[[v('_themeFolderData.slug_id')]]"
               data-name="[[v('_themeFolderData._name')]]" data-url_page="[[v('_themeFolderData._link')]]" data-is_track="1">
                <img width="200px" height="200px" loading="lazy"
                     src="[[v('_themeFolderData.image_url .. Data.ThemeFolderTrackDefaultImage')]]" alt="[[v('_themeFolderData._name')]]" class="tonics-individual-art-image">
                <div class="tonics-file-filename">[[v('_themeFolderData._name')]]</div>
                <span class="svg-per-file-loading display-none"></span>
            </a>

            <div class="tonics-cart-more-info d:flex justify-content:center flex-gap:small">

                <button type="button" title="Play" data-tonics-audioplayer-track=""
                        data-audioplayer_songurl="[[v('_themeFolderData.audio_url')]]"
                        data-audioplayer_title="[[v('_themeFolderData._name')]]"
                        data-audioplayer_image="[[v('_themeFolderData.image_url .. Data.ThemeFolderTrackDefaultImage')]]" data-audioplayer_format="mp3"
                        data-audioplayer_play="false"
                        class="audioplayer-track border:none act-like-button icon:audio bg:transparent cursor:pointer color:white">
                    <svg class="audio-play icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-audio-play"></use>
                    </svg>
                    <svg class="audio-pause icon:audio tonics-widget pointer-events:none">
                        <use class="svgUse" xlink:href="#tonics-audio-pause"></use>
                    </svg>
                </button>
                <button type="button" title="Play" class="audioplayer-track border:none act-like-button icon:audio bg:transparent cursor:pointer color:white">
                    <svg class="icon:audio tonics-cart-icon tonics-widget">
                        <use class="svgUse" xlink:href="#tonics-cart"></use>
                    </svg>

                </button>
            </div>
        </li>
        ]]
        ]]
    </ul>
</div>
]]