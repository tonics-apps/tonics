var kt=Object.defineProperty;var s=(l,f)=>kt(l,"name",{value:f,configurable:!0});var Ot=Object.defineProperty,bt=s((l,f)=>Ot(l,"name",{value:f,configurable:!0}),"__name"),G=s(class{constructor(l={}){this.$callbacks={},this.http=new XMLHttpRequest,this.headers=l,this.settings()}getCallbacks(){return this.$callbacks}settings(){this.getCallbacks().callbacks={onProgress:null}}checkIfCallbackIsSet(){if(!this.getCallbacks().callbacks)throw new DOMException("No Callbacks exist");return!0}onProgress(l){if(this.checkIfCallbackIsSet())return this.getCallbacks().callbacks.onProgress=l,this}Get(l,f){this.getHttp().open("GET",l,!0),this.setHeaders(),this.getHttp().send();let p=this;this.getHttp().onreadystatechange=function(){try{p.http.readyState===XMLHttpRequest.DONE&&(p.http.status===200?f(null,p.http.response):f(p.http.response))}catch(h){f("Something Went Wrong: "+h.description)}}}Post(l,f,p){this.getHttp().open("POST",l,!0),this.setHeaders(),this.getHttp().send(f);let h=this,v=h.getCallbacks().callbacks.onProgress;v!==null&&typeof v=="function"&&this.getHttp().upload.addEventListener("progress",function(y){v(y)}),this.getHttp().onreadystatechange=function(){try{h.http.onload=function(){p(null,h.http.responseText)}}catch(y){p("Something Went Wrong: "+y.description)}}}Put(l,f,p){this.getHttp().open("PUT",l,!0),this.setHeaders(),this.getHttp().send(f);let h=this,v=h.getCallbacks().callbacks.onProgress;v!==null&&typeof v=="function"&&this.getHttp().upload.addEventListener("progress",function(y){v(y)});try{this.http.onload=function(){h.http.status===200?p(null,h.http.response):p(h.http.response)}}catch(y){p("Something Went Wrong: "+y.description)}}Delete(l,f=null,p){this.http.open("DELETE",l,!0),this.setHeaders(),f?this.http.send(f):this.http.send();let h=this;try{this.http.onload=function(){h.http.status===200?p(null,h.http.response):p(h.http.response)}}catch(v){p("Something Went Wrong: "+v.description)}}getHeaders(){return this.headers}setHeaders(){if(this.getHeaders())for(let l in this.getHeaders())this.getHttp().setRequestHeader(l,this.getHeaders()[l])}getHttp(){return this.http}},"XHRApi");bt(G,"XHRApi");window.hasOwnProperty("TonicsScript")||(window.TonicsScript={});window.TonicsScript.XHRApi=(l={})=>new G(l);(function(l,f){typeof exports=="object"&&typeof module=="object"?module.exports=f():typeof define=="function"&&define.amd?define("Navigo",[],f):typeof exports=="object"?exports.Navigo=f():l.Navigo=f()})(typeof self!="undefined"?self:void 0,function(){return function(){"use strict";var l={407:function(h,v,y){y.d(v,{default:function(){return yt}});var U=/([:*])(\w+)/g,Q=/\*/g,T=/\/\?/g;function J(t){return t===void 0&&(t="/"),$()?location.pathname+location.search+location.hash:t}s(J,"a");function m(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}s(m,"s");function q(t){return typeof t=="string"}s(q,"c");function N(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}s(N,"u");function j(t){var n=m(t).split(/\?(.*)?$/);return[m(n[0]),n.slice(1).join("")]}s(j,"h");function W(t){for(var n={},r=t.split("&"),i=0;i<r.length;i++){var a=r[i].split("=");if(a[0]!==""){var c=decodeURIComponent(a[0]);n[c]?(Array.isArray(n[c])||(n[c]=[n[c]]),n[c].push(decodeURIComponent(a[1]||""))):n[c]=decodeURIComponent(a[1]||"")}}return n}s(W,"f");function V(t,n){var r,i=j(m(t.currentLocationPath)),a=i[0],c=i[1],_=c===""?null:W(c),w=[];if(q(n.path)){if(r="(?:/^|^)"+m(n.path).replace(U,function(L,A,O){return w.push(O),"([^/]+)"}).replace(Q,"?(?:.*)").replace(T,"/?([^/]+|)")+"$",m(n.path)===""&&m(a)==="")return{url:a,queryString:c,hashString:N(t.to),route:n,data:null,params:_}}else r=n.path;var H=new RegExp(r,""),P=a.match(H);if(P){var R=q(n.path)?function(L,A){return A.length===0?null:L?L.slice(1,L.length).reduce(function(O,I,M){return O===null&&(O={}),O[A[M]]=decodeURIComponent(I),O},null):null}(P,w):P.groups?P.groups:P.slice(1);return{url:m(a.replace(new RegExp("^"+t.instance.root),"")),queryString:c,hashString:N(t.to),route:n,data:R,params:_}}return!1}s(V,"l");function Y(){return!(typeof window=="undefined"||!window.history||!window.history.pushState)}s(Y,"p");function E(t,n){return t[n]===void 0||t[n]===!0}s(E,"d");function $(){return typeof window!="undefined"}s($,"v");function pt(t,n){return t===void 0&&(t=[]),n===void 0&&(n={}),t.filter(function(r){return r}).forEach(function(r){["before","after","already","leave"].forEach(function(i){r[i]&&(n[i]||(n[i]=[]),n[i].push(r[i]))})}),n}s(pt,"g");function b(t,n,r){var i=n||{},a=0;s(function c(){t[a]?Array.isArray(t[a])?(t.splice.apply(t,[a,1].concat(t[a][0](i)?t[a][1]:t[a][2])),c()):t[a](i,function(_){_===void 0||_===!0?(a+=1,c()):r&&r(i)}):r&&r(i)},"n")()}s(b,"m");function Z(t,n){t.currentLocationPath===void 0&&(t.currentLocationPath=t.to=J(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),n()}s(Z,"y");function D(t,n){for(var r=0;r<t.instance.routes.length;r++){var i=V(t,t.instance.routes[r]);if(i&&(t.matches||(t.matches=[]),t.matches.push(i),t.resolveOptions.strategy==="ONE"))return void n()}n()}s(D,"_");function dt(t,n){t.navigateOptions&&(t.navigateOptions.shouldResolve!==void 0&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),t.navigateOptions.silent!==void 0&&console.warn('"silent" is deprecated. Please check the documentation.')),n()}s(dt,"k");function gt(t,n){t.navigateOptions.force===!0?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),n(!1)):n()}s(gt,"O"),b.if=function(t,n,r){return Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]),[t,n,r]};var B=$(),vt=Y();function mt(t,n){if(E(t.navigateOptions,"updateBrowserURL")){var r=("/"+t.to).replace(/\/\//g,"/"),i=B&&t.resolveOptions&&t.resolveOptions.hash===!0;vt?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",i?"#"+r:r),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout(function(){if(!i){var a=location.hash;location.hash="",location.hash=a}t.instance.__freezeListening=!1},1))):B&&(window.location.href=t.to)}n()}s(mt,"b");function tt(t,n){var r=t.instance;r.lastResolved()?b(r.lastResolved().map(function(i){return function(a,c){if(i.route.hooks&&i.route.hooks.leave){var _=!1,w=t.instance.matchLocation(i.route.path,t.currentLocationPath,!1);_=i.route.path!=="*"?!w:!(t.matches&&t.matches.find(function(H){return i.route.path===H.route.path})),E(t.navigateOptions,"callHooks")&&_?b(i.route.hooks.leave.map(function(H){return function(P,R){return H(function(L){L===!1?t.instance.__markAsClean(t):R()},t.matches&&t.matches.length>0?t.matches.length===1?t.matches[0]:t.matches:void 0)}}).concat([function(){return c()}])):c()}else c()}}),{},function(){return n()}):n()}s(tt,"A");function et(t,n){E(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),n()}s(et,"P");var nt=[function(t,n){var r=t.instance.lastResolved();if(r&&r[0]&&r[0].route===t.match.route&&r[0].url===t.match.url&&r[0].queryString===t.match.queryString)return r.forEach(function(i){i.route.hooks&&i.route.hooks.already&&E(t.navigateOptions,"callHooks")&&i.route.hooks.already.forEach(function(a){return a(t.match)})}),void n(!1);n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.before&&E(t.navigateOptions,"callHooks")?b(t.match.route.hooks.before.map(function(r){return function(i,a){return r(function(c){c===!1?t.instance.__markAsClean(t):a()},t.match)}}).concat([function(){return n()}])):n()},function(t,n){E(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.after&&E(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach(function(r){return r(t.match)}),n()}],rt=[tt,function(t,n){var r=t.instance._notFoundRoute;if(r){t.notFoundHandled=!0;var i=j(t.currentLocationPath),a=i[0],c=i[1],_=N(t.to);r.path=m(a);var w={url:r.path,queryString:c,hashString:_,data:null,route:r,params:c!==""?W(c):null};t.matches=[w],t.match=w}n()},b.if(function(t){return t.notFoundHandled},nt.concat([et]),[function(t,n){t.resolveOptions&&t.resolveOptions.noMatchWarning!==!1&&t.resolveOptions.noMatchWarning!==void 0||console.warn('Navigo: "'+t.currentLocationPath+`" didn't match any of the registered routes.`),n()},function(t,n){t.instance._setCurrent(null),n()}])];function ot(){return(ot=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}s(ot,"E");function it(t,n){var r=0;tt(t,s(function i(){r!==t.matches.length?b(nt,ot({},t,{match:t.matches[r]}),function(){r+=1,i()}):et(t,n)},"o"))}s(it,"x");function z(t){t.instance.__markAsClean(t)}s(z,"H");function at(){return(at=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}s(at,"j");var st="[data-navigo]";function yt(t,n){var r,i=n||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:st},a=this,c="/",_=null,w=[],H=!1,P=Y(),R=$();function L(e){return e.indexOf("#")>=0&&(e=i.hash===!0?e.split("#")[1]||"/":e.split("#")[0]),e}s(L,"R");function A(e){return m(c+"/"+m(e))}s(A,"E");function O(e,o,u,g){return e=q(e)?A(e):e,{name:g||m(String(e)),path:e,handler:o,hooks:pt(u)}}s(O,"N");function I(e,o){if(!a.__dirty){a.__dirty=!0,e=e?m(c)+"/"+m(e):void 0;var u={instance:a,to:e,currentLocationPath:e,navigateOptions:{},resolveOptions:at({},i,o)};return b([Z,D,b.if(function(g){var d=g.matches;return d&&d.length>0},it,rt)],u,z),!!u.matches&&u.matches}a.__waiting.push(function(){return a.resolve(e,o)})}s(I,"U");function M(e,o){if(a.__dirty)a.__waiting.push(function(){return a.navigate(e,o)});else{a.__dirty=!0,e=m(c)+"/"+m(e);var u={instance:a,to:e,navigateOptions:o||{},resolveOptions:o&&o.resolveOptions?o.resolveOptions:i,currentLocationPath:L(e)};b([dt,gt,D,b.if(function(g){var d=g.matches;return d&&d.length>0},it,rt),mt,z],u,z)}}s(M,"q");function ct(){if(R)return(R?[].slice.call(document.querySelectorAll(i.linksSelector||st)):[]).forEach(function(e){e.getAttribute("data-navigo")!=="false"&&e.getAttribute("target")!=="_blank"?e.hasListenerAttached||(e.hasListenerAttached=!0,e.navigoHandler=function(o){if((o.ctrlKey||o.metaKey)&&o.target.tagName.toLowerCase()==="a")return!1;var u=e.getAttribute("href");if(u==null)return!1;if(u.match(/^(http|https)/)&&typeof URL!="undefined")try{var g=new URL(u);u=g.pathname+g.search}catch(S){}var d=function(S){if(!S)return{};var k,X=S.split(","),x={};return X.forEach(function(wt){var C=wt.split(":").map(function(_t){return _t.replace(/(^ +| +$)/g,"")});switch(C[0]){case"historyAPIMethod":x.historyAPIMethod=C[1];break;case"resolveOptionsStrategy":k||(k={}),k.strategy=C[1];break;case"resolveOptionsHash":k||(k={}),k.hash=C[1]==="true";break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":x[C[0]]=C[1]==="true"}}),k&&(x.resolveOptions=k),x}(e.getAttribute("data-navigo-options"));H||(o.preventDefault(),o.stopPropagation(),a.navigate(m(u),d))},e.addEventListener("click",e.navigoHandler)):e.hasListenerAttached&&e.removeEventListener("click",e.navigoHandler)}),a}s(ct,"F");function ut(e,o,u){var g=w.find(function(k){return k.name===e}),d=null;if(g){if(d=g.path,o)for(var S in o)d=d.replace(":"+S,o[S]);d=d.match(/^\//)?d:"/"+d}return d&&u&&!u.includeRoot&&(d=d.replace(new RegExp("^/"+c),"")),d}s(ut,"I");function ht(e){var o=j(m(e)),u=o[0],g=o[1],d=g===""?null:W(g);return{url:u,queryString:g,hashString:N(e),route:O(u,function(){},[r],u),data:null,params:d}}s(ht,"M");function F(e,o,u){return typeof o=="string"&&(o=lt(o)),o?(o.hooks[e]||(o.hooks[e]=[]),o.hooks[e].push(u),function(){o.hooks[e]=o.hooks[e].filter(function(g){return g!==u})}):(console.warn("Route doesn't exists: "+o),function(){})}s(F,"T");function lt(e){return typeof e=="string"?w.find(function(o){return o.name===A(e)}):w.find(function(o){return o.handler===e})}s(lt,"z"),t?c=m(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=c,this.routes=w,this.destroyed=H,this.current=_,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=function(e){e.instance.__dirty=!1,e.instance.__waiting.length>0&&e.instance.__waiting.shift()()},this.on=function(e,o,u){var g=this;return typeof e!="object"||e instanceof RegExp?(typeof e=="function"&&(u=o,o=e,e=c),w.push(O(e,o,[r,u])),this):(Object.keys(e).forEach(function(d){if(typeof e[d]=="function")g.on(d,e[d]);else{var S=e[d],k=S.uses,X=S.as,x=S.hooks;w.push(O(d,k,[r,x],X))}}),this)},this.off=function(e){return this.routes=w=w.filter(function(o){return q(e)?m(o.path)!==m(e):typeof e=="function"?e!==o.handler:String(o.path)!==String(e)}),this},this.resolve=I,this.navigate=M,this.navigateByName=function(e,o,u){var g=ut(e,o);return g!==null&&(M(g.replace(new RegExp("^/?"+c),""),u),!0)},this.destroy=function(){this.routes=w=[],P&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=H=!0},this.notFound=function(e,o){return a._notFoundRoute=O("*",e,[r,o],"__NOT_FOUND__"),this},this.updatePageLinks=ct,this.link=function(e){return"/"+c+"/"+m(e)},this.hooks=function(e){return r=e,this},this.extractGETParameters=function(e){return j(L(e))},this.lastResolved=function(){return _},this.generate=ut,this.getLinkPath=function(e){return e.getAttribute("href")},this.match=function(e){var o={instance:a,currentLocationPath:e,to:e,navigateOptions:{},resolveOptions:i};return D(o,function(){}),!!o.matches&&o.matches},this.matchLocation=function(e,o,u){o===void 0||u!==void 0&&!u||(o=A(o));var g={instance:a,to:o,currentLocationPath:o};return Z(g,function(){}),typeof e=="string"&&(e=u===void 0||u?A(e):e),V(g,{name:String(e),path:e,handler:function(){},hooks:{}})||!1},this.getCurrentLocation=function(){return ht(m(J(c)).replace(new RegExp("^"+c),""))},this.addBeforeHook=F.bind(this,"before"),this.addAfterHook=F.bind(this,"after"),this.addAlreadyHook=F.bind(this,"already"),this.addLeaveHook=F.bind(this,"leave"),this.getRoute=lt,this._pathToMatchObject=ht,this._clean=m,this._checkForAHash=L,this._setCurrent=function(e){return _=a.current=e},function(){P&&(this.__popstateListener=function(){a.__freezeListening||I()},window.addEventListener("popstate",this.__popstateListener))}.call(this),ct.call(this)}s(yt,"N")}},f={};function p(h){if(f[h])return f[h].exports;var v=f[h]={exports:{}};return l[h](v,v.exports,p),v.exports}return s(p,"e"),p.d=function(h,v){for(var y in v)p.o(v,y)&&!p.o(h,y)&&Object.defineProperty(h,y,{enumerable:!0,get:v[y]})},p.o=function(h,v){return Object.prototype.hasOwnProperty.call(h,v)},p(407)}().default});try{window.TonicsScript.MenuToggle(".form-and-filter",window.TonicsScript.Query()).settings(".form-and-filter",".filter-button-toggle",".filter-container").menuIsOff(["swing-out-top-fwd","d:none"],["swing-in-top-fwd","d:flex"]).menuIsOn(["swing-in-top-fwd","d:flex"],["swing-out-top-fwd","d:none"]).closeOnClickOutSide(!1).stopPropagation(!1).run(),window.TonicsScript.MenuToggle(".form-and-filter",window.TonicsScript.Query()).settings(".form-and-filter",".more-filter-button-toggle",".more-filter-container").menuIsOff(["swing-out-top-fwd","d:none"],["swing-in-top-fwd","d:flex"]).menuIsOn(["swing-in-top-fwd","d:flex"],["swing-out-top-fwd","d:none"]).closeOnClickOutSide(!1).stopPropagation(!1).run()}catch(l){console.error("An Error Occur Setting MenuToggle: Form-Filter")}var K=new Navigo("/");K.on("/tracks",()=>{console.log("Navigating To Tracks")});var Lt=document.querySelector(".tonics-files-container"),ft=document.querySelector("form");ft&&ft.addEventListener("submit",function(l){this.querySelectorAll("input, select").forEach(p=>{p.value===""&&p.removeAttribute("name")})});K.on("/track_categories/:slug_id/:track_cat_slug",({data:l,e:f})=>{},{before(l,f){var v;let p=(v=f.data)==null?void 0:v.slug_id,h=Lt.querySelector(`[data-slug_id="${p}"]`);if(h){let y=h.dataset.url_page;h.querySelector(".svg-per-file-loading").classList.remove("d:none");let U={type:"track_category"};throw y&&new G(U).Get(y,{},function(Q,T){T&&(T=JSON.parse(T))}),new Error;h.querySelector(".svg-per-file-loading").classList.add("d:none"),l()}}});K.resolve();export{G as XHRApi};
